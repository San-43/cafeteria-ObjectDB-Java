# Cafeteria Manager (ObjectDB + JavaFX)

Desktop application built with JavaFX to manage the operations of a coffee shop chain. The project uses ObjectDB as an embedded persistence engine through JPA and provides forms to capture and query data about stores, products, ingredients, recipes, inventory, and sales.

## Key features

- JavaFX interface with a main dashboard (`MainView.fxml`) that lets users navigate between multiple forms.
- Persistence powered by ObjectDB via JPA; the database file is stored locally at `data/cafeteria.odb` and initializes automatically the first time the app runs.
- Sample data generated by `DbBootstrap` so you start with stores, products, recipes, inventory, and sales already populated.
- Specialized forms for:
  - Stores, products, and per-branch inventory.
  - Ingredients, proportions, and preparation steps associated with each recipe.
  - Recording sales and the items sold in each ticket.
- Includes additional controls (ControlsFX, ValidatorFX, TilesFX, Ikonli, BootstrapFX, and FXGL) ready to extend the UI with validations and rich components.

## Requirements

- Java 21 or newer (the build uses `--release 21`).
- Maven 3.9+ (the repository ships with the `mvnw` / `mvnw.cmd` wrapper).
- No need to install ObjectDB separately; the `pom.xml` pulls the dependency from the official repository.

## Running the application

```bash
# Clean, compile, and launch the JavaFX UI
./mvnw clean javafx:run
```

The `javafx-maven-plugin` boots the `org.cafeteria.cafeteria.MainApp` class. On startup, it creates or updates the ObjectDB database at `data/cafeteria.odb`; if the file is missing, `DbBootstrap` inserts the sample records.

### jlink packaging

The JavaFX plugin is configured to generate a modular runtime image with `./mvnw javafx:jlink`. The output lives in `target/app`. From there you can launch the application with `target/app/bin/app`.

## Project structure

```
src/main/java/org/cafeteria/cafeteria/
├── MainApp.java                # JavaFX entry point
├── config/                     # JPA configuration and initial data loading
├── controller/                 # FXML controllers for each form
└── model/                      # JPA entities (Store, Product, Recipe, etc.)

src/main/resources/
├── META-INF/persistence.xml    # Persistence unit configuration (optional)
└── fxml/                       # JavaFX views (forms)
```

Entities and controllers live in separate packages to keep UI and domain logic isolated. The main form loads each view inside a `StackPane`, making it easy to add new sections.

## Data management

- The `JPAUtil` helper creates the `EntityManagerFactory`, first trying the `CafeteriaPU` unit defined in `META-INF/persistence.xml` and, as a fallback, configuring ObjectDB directly.
- The `DbBootstrap` class checks whether data already exists and, when the database is empty, persists a complete set of records (stores, inventory, sales, recipes, ingredients, and proportions) to facilitate demonstrations.

The `data/cafeteria.odb` file lives alongside the project; you can back it up or delete it to regenerate the sample data.

## Testing

The project includes JUnit 5 dependencies, although no automated test suites are currently present. You can run the standard Maven goal:

```bash
./mvnw test
```

## License

Add the appropriate license for your project (MIT, Apache 2.0, etc.) if it has not been defined yet.
